version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - ask_next_bus
  - ask_previous_bus
  - ask_bus_schedule
  - start_new_query
  - help
  - nlu_fallback
  - inform
  - ask_bus_info
  - inform_departure_stop
  - inform_destination
  - inform_travel_time
  - inform_bus_number
  - request_bus_schedule

entities:
  - bus_number
  - location
  - time
  - neighborhood

slots:
  bus_number:
    type: text
    mappings:
      - type: from_entity
        entity: bus_number
        conditions:
          - active_loop: schedule_form
            requested_slot: bus_number
      - type: from_text
        conditions:
          - active_loop: schedule_form
            requested_slot: bus_number
  departure_stop:
    type: text
    mappings:
      - type: from_entity
        entity: location
        conditions:
          - active_loop: schedule_form
            requested_slot: departure_stop
      - type: from_text
        conditions:
          - active_loop: schedule_form
            requested_slot: departure_stop
  destination_stop:
    type: text
    mappings:
      - type: from_entity
        entity: location
        conditions:
          - active_loop: schedule_form
            requested_slot: destination_stop
      - type: from_text
        conditions:
          - active_loop: schedule_form
            requested_slot: destination_stop
  time:
    type: text
    mappings:
      - type: from_entity
        entity: time
        conditions:
          - active_loop: schedule_form
            requested_slot: time
      - type: from_text
        conditions:
          - active_loop: schedule_form
            requested_slot: time

forms:
  schedule_form:
    required_slots:
      - bus_number
      - departure_stop
      - destination_stop
      - time

responses:
  utter_greet:
    - text: "Welcome to the CMU Let's Go bus information system. To get help at any time, just say Help or press zero. What can I do for you?"
  utter_goodbye:
    - text: "Thank you for using the CMU Let's Go Bus Information System. Goodbye."
  utter_ask_bus_number:
    - text: "Which bus route would you like? (e.g., 28X, 54C)"
  utter_ask_departure_stop:
    - text: "Where are you leaving from?"
  utter_ask_destination_stop:
    - text: "Where are you going to?"
  utter_ask_time:
    - text: "When do you wanna travel?"
    - text: "When do you want to travel?"
  utter_ask_neighborhood:
    - text: "In what neighborhood is your departure stop?"
  utter_ask_confirm_bus:
    - text: "The {bus_number}. Did I get that right?"
  utter_ask_confirm_next_bus:
    - text: "I think you want the next bus. Am I right?"
  utter_ask_confirm_previous_bus:
    - text: "I think you want the previous bus. Am I right?"
  utter_ask_start_new_query:
    - text: "To ask about a different trip, you can say, start a new query. If you are finished, you can say goodbye."
  utter_ask_help:
    - text: "I am an automated spoken dialogue system that can give you schedule information for bus routes in Pittsburgh's East End. You can ask me about the following buses: 28X, 54C, 56U, 59U, 61A, 61B, 61C, 61D, 61F, 64A, 69A, and 501. What bus schedule information are you looking for?"
  utter_no_bus_found:
    - text: "I'm sorry, but there is no bus that goes between {departure_stop} and {destination_stop} at that time."
  utter_bus_info:
    - text: "There is a {bus_number} leaving {departure_stop} at {time}. It will arrive at {destination_stop} at {arrival_time}."
  utter_bus_not_covered:
    - text: "I'm sorry but I do not have the schedule for the {bus_number}. The routes I currently cover are the following: 28X, 54C, 56U, 59U, 61A, 61B, 61C, 61D, 61F, 64A, 69A, and 501."
  utter_neighborhood_not_covered:
    - text: "I'm sorry but I do not have the schedule for buses serving {destination_stop}. Currently, I only cover some routes in the following neighborhoods: Downtown, Oakland, Shadyside, Squirrel Hill, Homestead, McKeesport, and the airport."
  utter_help:
    - text: "I am an automated spoken dialogue system that can give you schedule information for bus routes in Pittsburgh's East End. You can ask me about the following buses: 28X, 54C, 56U, 59U, 61A, 61B, 61C, 61D, 61F, 64A, 69A, and 501."
  utter_default_fallback:
    - text: "I'm sorry, I didn't understand that. Could you please rephrase?"
  utter_searching:
    - text: "Let me look that up for you."
  utter_find_bus:
    - text: "I found some information for you."
  utter_follow_up:
    - text: "Is there anything else you would like to know?"
  utter_ask_destination:
    - text: "What is your destination?"
  utter_find_next_bus:
    - text: "Here is the information for the next bus."
  utter_find_previous_bus:
    - text: "Here is the information for the previous bus."
  utter_ask_departure_stop_confirmation:
    - text: "You said you are leaving from {departure_stop}. Is that right?"
  utter_ask_travel_time_confirmation:
    - text: "You want to travel at {time}. Did I get that right?"
  utter_ask_destination_confirmation:
    - text: "Your destination is {destination_stop}. Is that correct?"
  utter_ask_travel_time:
    - text: "What time do you want to travel?"

actions: []
